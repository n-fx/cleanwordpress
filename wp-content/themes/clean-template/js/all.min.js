
      var App = angular.module('App', ['ngRoute']);

      App.config(function($routeProvider) {
        $routeProvider.
          when('/', {
            templateUrl: Dir.publicDir + 'pages/videos.html',
            controller: 'MainCtrl'
          }).
          when('/:videoName', {
            templateUrl: Dir.publicDir + 'pages/single-video.html',
            controller: 'MainCtrl'
          }).
          otherwise({
            redirectTo: '/'
          });
      });

  


    App.controller('MainCtrl', function ($scope, $routeParams, $http){
        $scope.name = $routeParams.videoName;
           $http({
            method: 'GET',
            url: 'https://api.wistia.com/v1/projects/hexk4mesp5.json?api_password=a0c49f6d838e0752737262c238fa02a655e6e861',
            cache: true
        }).then(function(response) {
            //console.log(response);
            $scope.videos = response.data.medias;
              $scope.v = response.data.medias.filter(function(entry){
                return entry.name === $scope.name;
              })[0]; 

        }, function(response) {
      		$scope.videos = "Something went wrong";
    	});
    });


    App.filter('timeDurationFilter', function () { 
        return function (i) { 
          	return  moment.duration(i, "minutes").format();
        };
    });


    App.directive('headerdir', function() {
        return {
			restrict: 'E',
			templateUrl: Dir.publicDir + 'pages/components/header.html',
        };
    });
    App.directive('footerdir', function() {
        return {
			restrict: 'E',
			templateUrl: Dir.publicDir + 'pages/components/footer.html',
        };
    });

